<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <style type="text/css">
            #tabelaCriticidade td,
            #tabelaHistorico td {
                padding: 5px;
            }

            .compras legend {
                border-bottom: 1px solid black;
            }

            .compras ul.abas {
                border-bottom: 1px solid #dcdddc;
                padding-left: 10px;
            }

            .compras ul.abas li {
                list-style-type: none;
                display: inline-block;
                border-top: 1px solid #dcdddc;
                border-right: 1px solid #dcdddc;
                border-left: 1px solid #dcdddc;
                padding: 10px;
                border-top-left-radius: 8px;
                border-top-right-radius: 8px;
            }

            .compras .abas a {
                text-decoration: none;
            }

            .compras label {
                width: 100%;
                color: #004791;
                font-weight: bold;
            }

            .compras .portlet-body {
                background: rgba(255, 255, 255, 1);
                background: -moz-linear-gradient(
                    45deg,
                    rgba(255, 255, 255, 1) 0%,
                    rgba(242, 245, 248, 1) 20%,
                    rgba(255, 255, 255, 1) 20%,
                    rgba(255, 255, 255, 1) 21%,
                    rgba(242, 245, 248, 1) 34%,
                    rgba(242, 245, 248, 1) 51%,
                    rgba(255, 255, 255, 1) 51%,
                    rgba(242, 245, 248, 1) 77%,
                    rgba(255, 255, 255, 1) 77%,
                    rgba(242, 245, 248, 1) 98%,
                    rgba(255, 255, 255, 1) 100%
                );
                background: -webkit-gradient(
                    left bottom,
                    right top,
                    color-stop(0%, rgba(255, 255, 255, 1)),
                    color-stop(20%, rgba(242, 245, 248, 1)),
                    color-stop(20%, rgba(255, 255, 255, 1)),
                    color-stop(21%, rgba(255, 255, 255, 1)),
                    color-stop(34%, rgba(242, 245, 248, 1)),
                    color-stop(51%, rgba(242, 245, 248, 1)),
                    color-stop(51%, rgba(255, 255, 255, 1)),
                    color-stop(77%, rgba(242, 245, 248, 1)),
                    color-stop(77%, rgba(255, 255, 255, 1)),
                    color-stop(98%, rgba(242, 245, 248, 1)),
                    color-stop(100%, rgba(255, 255, 255, 1))
                );
                background: -webkit-linear-gradient(
                    45deg,
                    rgba(255, 255, 255, 1) 0%,
                    rgba(242, 245, 248, 1) 20%,
                    rgba(255, 255, 255, 1) 20%,
                    rgba(255, 255, 255, 1) 21%,
                    rgba(242, 245, 248, 1) 34%,
                    rgba(242, 245, 248, 1) 51%,
                    rgba(255, 255, 255, 1) 51%,
                    rgba(242, 245, 248, 1) 77%,
                    rgba(255, 255, 255, 1) 77%,
                    rgba(242, 245, 248, 1) 98%,
                    rgba(255, 255, 255, 1) 100%
                );
                background: -o-linear-gradient(
                    45deg,
                    rgba(255, 255, 255, 1) 0%,
                    rgba(242, 245, 248, 1) 20%,
                    rgba(255, 255, 255, 1) 20%,
                    rgba(255, 255, 255, 1) 21%,
                    rgba(242, 245, 248, 1) 34%,
                    rgba(242, 245, 248, 1) 51%,
                    rgba(255, 255, 255, 1) 51%,
                    rgba(242, 245, 248, 1) 77%,
                    rgba(255, 255, 255, 1) 77%,
                    rgba(242, 245, 248, 1) 98%,
                    rgba(255, 255, 255, 1) 100%
                );
                background: -ms-linear-gradient(
                    45deg,
                    rgba(255, 255, 255, 1) 0%,
                    rgba(242, 245, 248, 1) 20%,
                    rgba(255, 255, 255, 1) 20%,
                    rgba(255, 255, 255, 1) 21%,
                    rgba(242, 245, 248, 1) 34%,
                    rgba(242, 245, 248, 1) 51%,
                    rgba(255, 255, 255, 1) 51%,
                    rgba(242, 245, 248, 1) 77%,
                    rgba(255, 255, 255, 1) 77%,
                    rgba(242, 245, 248, 1) 98%,
                    rgba(255, 255, 255, 1) 100%
                );
                background: linear-gradient(
                    45deg,
                    rgba(255, 255, 255, 1) 0%,
                    rgba(242, 245, 248, 1) 20%,
                    rgba(255, 255, 255, 1) 20%,
                    rgba(255, 255, 255, 1) 21%,
                    rgba(242, 245, 248, 1) 34%,
                    rgba(242, 245, 248, 1) 51%,
                    rgba(255, 255, 255, 1) 51%,
                    rgba(242, 245, 248, 1) 77%,
                    rgba(255, 255, 255, 1) 77%,
                    rgba(242, 245, 248, 1) 98%,
                    rgba(255, 255, 255, 1) 100%
                );
                filter: progid: DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#ffffff', GradientType=1);
            }

            .form-compra input,
            .form-compra select,
            .form-compra textarea,
            .form-solicitante input,
            .form-solicitante select,
            .form-solicitante textarea {
                margin-bottom: 40px;
            }

            .table input {
                margin-bottom: 0;
            }

            .compras .table td {
                padding: 0;
            }

            .compras .portlet-title {
                background: rgba(229, 240, 110, 1);
                background: -moz-linear-gradient(
                    top,
                    rgba(229, 240, 110, 1) 0%,
                    rgba(206, 221, 70, 1) 25%,
                    rgba(206, 221, 70, 1) 74%,
                    rgba(214, 219, 120, 1) 100%
                );
                background: -webkit-gradient(
                    left top,
                    left bottom,
                    color-stop(0%, rgba(229, 240, 110, 1)),
                    color-stop(25%, rgba(206, 221, 70, 1)),
                    color-stop(74%, rgba(206, 221, 70, 1)),
                    color-stop(100%, rgba(214, 219, 120, 1))
                );
                background: -webkit-linear-gradient(
                    top,
                    rgba(229, 240, 110, 1) 0%,
                    rgba(206, 221, 70, 1) 25%,
                    rgba(206, 221, 70, 1) 74%,
                    rgba(214, 219, 120, 1) 100%
                );
                background: -o-linear-gradient(
                    top,
                    rgba(229, 240, 110, 1) 0%,
                    rgba(206, 221, 70, 1) 25%,
                    rgba(206, 221, 70, 1) 74%,
                    rgba(214, 219, 120, 1) 100%
                );
                background: -ms-linear-gradient(
                    top,
                    rgba(229, 240, 110, 1) 0%,
                    rgba(206, 221, 70, 1) 25%,
                    rgba(206, 221, 70, 1) 74%,
                    rgba(214, 219, 120, 1) 100%
                );
                background: linear-gradient(
                    to bottom,
                    rgba(229, 240, 110, 1) 0%,
                    rgba(206, 221, 70, 1) 25%,
                    rgba(206, 221, 70, 1) 74%,
                    rgba(214, 219, 120, 1) 100%
                );
                filter: progid: DXImageTransform.Microsoft.gradient( startColorstr='#e5f06e', endColorstr='#d6db78', GradientType=0);
                border: 1px solid #d3dcc8;
            }

            .grid_dll {
                width: fit-content;
            }

            .processo {
                height: 13px;
            }

            .processo.bg-success {
                background-color: #fcfb00 !important;
            }

            #cronograma td[class*="td1"] input,
            #cronograma td[class*="td6"] input,
            #cronograma td[class*="td7"] input {
                width: 60px;
            }

            #cronograma td[class*="td2"] input {
                width: 170px;
            }

            #cronograma td[class*="td3"] input {
                width: 110px;
            }

            #cronograma td[class*="td4"] input,
            #cronograma td[class*="td5"] input {
                width: 110px;
            }

            #cronograma td[class*="td"] input,
            #cronograma td[class="acoes"] [data-js*="cronograma_tr"] {
                height: 34.3px;
            }

            #numeroRv td[class*="td1"] input {
                min-width: 200px;
                height: 36px;
            }

            #cronograma td[class="acoes"] [data-js*="cronograma_tr"] {
                line-height: 1.6;
            }

            #numeroRv td[class="acoes"] [data-js*="numeroRv_tr"] {
                line-height: 1.6;
                width: 50px;
            }

            .vr-acaoes {
                width: 60px;
                justify-content: center;
            }

            #numeroRv [data-js*="numeroRv"] {
                width: 100px;
            }

            .table-cronograma {
                border: 1px solid #a4a2a2;
            }

            .table-cronograma .th_mother-ano th {
                padding: 30px 10px 10px 10px;
                font-size: 1.5em;
                color: #686e73;
                border: #a4a2a2;
                border: 2px solid #a4a2a2;
            }

            .table-cronograma .th_dias-semana th {
                padding: 1px 6.2px 1px 6.2px;
                width: 60px;
                text-align: center;
                font-size: 1.2em;
                color: #583f3d;
                border: 2px solid #a4a2a2;
            }

            .table-cronograma tbody td {
                border: 2px solid #a4a2a2;
                padding-top: 1px;
                padding-bottom: 2px;
            }

            .btn-scroll {
                display: flex;
                position: fixed;
                text-align: right;
            }

            .btn-scroll span {
                height: 30px;
                width: 30px;
                margin: 2px 3px 4px 5px;
                border: 1px solid #b5b5b2ab;
                border-radius: 5px;
                line-height: 2;
                text-align: center;
                cursor: pointer;
                /* font-size: 1.2em; */
                box-shadow: 1px 2px 2px 0px rgba(135, 125, 125, 0.5);
            }

            .col-sm-12.tabela-grid-conograma {
                width: fit-content;
            }

            .sweet-alert,
            .sweet-overlay {
                z-index: 30000;
            }

            .no--uppercase {
                text-transform: none !important;
            }

            #tabelaHistorico_filter {
                float: right;
            }

        </style>

        <script id="scriptInput" type="text/javascript">
            $("body").ready(function() {
                $(document).ajaxComplete(function() {
                    $("body .formulario-upload").each(function() {
                        var input = $(this);
                        var ck = $(this).parent();
                        if (ck.length > 0) {
                            $(".tipoAnexoId").each(function() {
                                var id = $(this).data("tipo-anexo-id");
                                if (id == input.data("tipo-anexo-id")) {
                                    ck.removeClass(
                                        "fa-ban font-red-thunderbird"
                                    );
                                    ck.addClass("fa-check font-green-jungle");
                                }
                            });
                        }
                    });
                });
            });
        </script>
    </head>

    <body>
        <div class="compras container-fluid" style="padding: 0">
            <div class="col-md-12" style="padding: 0">
                <!-- BEGIN Portlet PORTLET-->
                <div class="portlet box blue-hoki">
                    <div class="portlet-title">
                        <div class="caption" style="color: #004791;">
                            <i class="fa fa-gift"></i>Solicita&ccedil;&atilde;o
                            de Compras
                        </div>

                        <div class="actions">&nbsp;</div>
                    </div>

                    <div class="portlet-body">
                        <div
                            class="slimScrollDiv"
                            style="position: relative; overflow: hidden; width: auto; height: auto"
                        >
                            <div
                                class="scroller"
                                data-handle-color="#a1b2bd"
                                data-initialized="1"
                                data-rail-color="yellow"
                                data-rail-visible="1"
                                style="height: auto; overflow: hidden; width: auto;"
                            >
                                <form role="form" style="padding: 10px">
                                    <div class="form-body">
                                        <div class="row">
                                            <div
                                                class="form-group"
                                                style="margin-bottom: 100px"
                                            >
                                                <div class="col-sm-3">
                                                    <span
                                                        class="h-card"
                                                        data-campo-altura="10"
                                                        data-campo-classe="form-control"
                                                        data-campo-estilo=""
                                                        data-campo-largura="200"
                                                        ><span
                                                            class="form-group form-md-line-input  "
                                                            ><label
                                                                for="CAMPO_9"
                                                                >N&ordm;
                                                                Solicita&ccedil;&atilde;o<!-- label--><input
                                                                    class="form-control"
                                                                    data-campo-id="@@9@@"
                                                                    id="CAMPO_9"
                                                                    style="width: auto; border-bottom: none;"
                                                                    type="text"/></label></span
                                                    ></span>
                                                </div>

                                                <div class="col-sm-3">
                                                    <span
                                                        class="h-card"
                                                        data-campo-altura="10"
                                                        data-campo-classe="form-control"
                                                        data-campo-estilo=""
                                                        data-campo-largura="200"
                                                        ><span
                                                            class="form-group form-md-line-input  "
                                                            ><label
                                                                for="CAMPO_10"
                                                                >Data da
                                                                Solicita&ccedil;&atilde;o<!-- label--><input
                                                                    class="form-control"
                                                                    data-campo-id="@@10@@"
                                                                    id="CAMPO_10"
                                                                    style="width: auto; border-bottom: none;"
                                                                    type="text"/></label></span
                                                    ></span>
                                                </div>

                                                <div class="col-md-3">
                                                    <span
                                                        class="h-card"
                                                        data-campo-altura="10"
                                                        data-campo-classe="form-control"
                                                        data-campo-estilo=""
                                                        data-campo-largura="200"
                                                        ><span
                                                            class="form-group form-md-line-input  "
                                                            ><label
                                                                for="CAMPO_1"
                                                                >Usu&aacute;rio
                                                                Logado<!-- label--><input
                                                                    class="form-control"
                                                                    data-campo-id="@@1@@"
                                                                    id="CAMPO_1"
                                                                    style="width: auto; border-bottom: none;"
                                                                    type="text"/></label></span
                                                    ></span>

                                                    <div
                                                        class="form-control-focus"
                                                    >
                                                        &nbsp;
                                                    </div>
                                                </div>

                                                <div class="col-md-3">
                                                    <span
                                                        class="h-card"
                                                        data-campo-altura="10"
                                                        data-campo-classe="form-control"
                                                        data-campo-estilo=""
                                                        data-campo-largura="200"
                                                        ><span
                                                            class="form-group form-md-line-input  "
                                                            ><label
                                                                for="CAMPO_2"
                                                                >Departamento<!-- label--><input
                                                                    class="form-control"
                                                                    data-campo-id="@@2@@"
                                                                    id="CAMPO_2"
                                                                    style="width: auto; border-bottom: none;"
                                                                    type="text"/></label></span
                                                    ></span>

                                                    <div
                                                        class="form-control-focus"
                                                    >
                                                        &nbsp;
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div
                                            class="form-group"
                                            style="display: none;"
                                        >
                                            <div class="col-sm-6">
                                                <span
                                                    class="h-card"
                                                    data-campo-altura="10"
                                                    data-campo-classe=""
                                                    data-campo-estilo=""
                                                    data-campo-largura="200"
                                                    style="display:block;"
                                                    ><span
                                                        class="form-group form-md-line-input "
                                                        ><select
                                                            class="form-control"
                                                            data-campo-id="@@45@@"
                                                            id="CAMPO_45"
                                                            style="width:200px;"
                                                            ><option
                                                                placeholder="45 - Nível Criticidade"
                                                                >45 -
                                                                N&iacute;vel
                                                                Criticidade</option
                                                            ><option
                                                                value="Valor02"
                                                                >Valor
                                                                02</option
                                                            >
                                                        </select></span
                                                    ></span
                                                >
                                            </div>

                                            <div class="col-sm-6">
                                                <span
                                                    class="h-card"
                                                    data-campo-altura="10"
                                                    data-campo-classe=""
                                                    data-campo-estilo=""
                                                    data-campo-largura="200"
                                                    style="display:block;"
                                                    ><span
                                                        class="form-group form-md-line-input "
                                                        ><input
                                                            class="form-control"
                                                            data-campo-id="@@49@@"
                                                            id="CAMPO_49"
                                                            placeholder="49 - Data SLA"
                                                            type="date"/></span
                                                ></span>
                                            </div>

                                            <div class="col-sm-6">
                                                <span
                                                    class="h-card"
                                                    data-campo-altura="10"
                                                    data-campo-classe=""
                                                    data-campo-estilo=""
                                                    data-campo-largura="200"
                                                    style="display:block;"
                                                    ><span
                                                        class="form-group form-md-line-input "
                                                        ><input
                                                            class="form-control"
                                                            data-campo-id="@@63@@"
                                                            id="CAMPO_63"
                                                            placeholder="63 - dataValidaçao"
                                                            style="width:200px;"
                                                            type="date"/></span
                                                ></span>
                                            </div>
                                        </div>

                                        <hr />
                                    </div>
                                </form>
                            </div>

                            <div class="form-row">
                                <ul class="abas">
                                    <li>
                                        <a class="aba aba-solicitante" href="#"
                                            >Dados do Solicitante</a
                                        >
                                    </li>
                                    <li>
                                        <a class="aba aba-compra" href="#"
                                            >Dados da Compra</a
                                        >
                                    </li>
                                    <li>
                                        <a class="aba aba-analista" href="#"
                                            >Comprador</a
                                        >
                                    </li>
                                </ul>
                            </div>
                            <!--DADOS DA COMPRA-->

                            <div
                                class="form-group form-compra"
                                style="margin-bottom: 70px"
                            >
                                <fieldset>
                                    <legend>
                                        Informa&ccedil;&otilde;es gerais
                                    </legend>

                                    <div class="form-group">
                                        <div class="col-sm-6">
                                            <label>Empresa </label>
                                            <span
                                                class="h-card"
                                                data-campo-altura="10"
                                                data-campo-classe=""
                                                data-campo-estilo=""
                                                data-campo-largura="200"
                                                style="display:block;"
                                                ><span
                                                    class="form-group form-md-line-input "
                                                    ><select
                                                        class="form-control"
                                                        data-campo-id="@@11@@"
                                                        id="@@11@@"
                                                        ><option
                                                            placeholder="11 - Empresa"
                                                            >11 -
                                                            Empresa</option
                                                        ><option value="Valor02"
                                                            >Valor 02</option
                                                        >
                                                    </select></span
                                                ></span
                                            >
                                        </div>

                                        <div class="col-sm-6">
                                            <label>Tipo de Compra</label>
                                            <span
                                                class="h-card"
                                                data-campo-altura="10"
                                                data-campo-classe=""
                                                data-campo-estilo=""
                                                data-campo-largura="200"
                                                style="display:block;"
                                                ><span
                                                    class="form-group form-md-line-input "
                                                    ><select
                                                        class="form-control"
                                                        data-campo-id="@@12@@"
                                                        id="@@12@@"
                                                        ><option
                                                            placeholder="12 - Tipo de Compra"
                                                            >12 - Tipo de
                                                            Compra</option
                                                        ><option value="Valor02"
                                                            >Valor 02</option
                                                        >
                                                    </select></span
                                                ></span
                                            >
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class="col-sm-6">
                                            <label>Modelo de Compra</label>
                                            <span
                                                class="h-card"
                                                data-campo-altura="10"
                                                data-campo-classe=""
                                                data-campo-estilo=""
                                                data-campo-largura="200"
                                                style="display:block;"
                                                ><span
                                                    class="form-group form-md-line-input "
                                                    ><select
                                                        class="form-control"
                                                        data-campo-id="@@13@@"
                                                        id="CAMPO_13"
                                                        ><option
                                                            placeholder="13 - Modelo de Compra"
                                                            >13 - Modelo de
                                                            Compra</option
                                                        ><option value="Valor02"
                                                            >Valor 02</option
                                                        >
                                                    </select></span
                                                ></span
                                            >
                                        </div>

                                        <div class="col-sm-6 acm_tbra">
                                            <label>ACM TBRA</label>
                                            <span
                                                class="h-card acm_tbr"
                                                data-campo-altura="10"
                                                data-campo-classe=""
                                                data-campo-estilo=""
                                                data-campo-largura="200"
                                                style="display:block;"
                                                ><span
                                                    class="form-group form-md-line-input "
                                                    ><input
                                                        class="form-control inteiro"
                                                        data-campo-id="@@50@@"
                                                        id="@@50@@"
                                                        maxlength="10"
                                                        placeholder=" "
                                                        type="text"/></span
                                            ></span>
                                        </div>
                                    </div>
                                </fieldset>

                                <fieldset>
                                    <legend>
                                        Informa&ccedil;&otilde;es Sobre o
                                        Projeto
                                    </legend>

                                    <div class="form-group">
                                        <div class="col-sm-6">
                                            <label>Nome de Projeto</label>
                                            <span
                                                class="h-card"
                                                data-campo-altura="10"
                                                data-campo-classe=""
                                                data-campo-estilo=""
                                                data-campo-largura="200"
                                                style="display:block;"
                                                ><span
                                                    class="form-group form-md-line-input "
                                                    ><input
                                                        class="form-control"
                                                        data-campo-id="@@15@@"
                                                        id="@@15@@"
                                                        placeholder=" "
                                                        type="text"/></span
                                            ></span>
                                        </div>

                                        <div class="col-sm-6">
                                            <label>Estrutura Beneficiada</label>
                                            <span
                                                class="h-card"
                                                data-campo-altura="10"
                                                data-campo-classe=""
                                                data-campo-estilo=""
                                                data-campo-largura="200"
                                                style="display:block;"
                                                ><span
                                                    class="form-group form-md-line-input "
                                                    ><select
                                                        class="form-control"
                                                        data-campo-id="@@16@@"
                                                        id="@@16@@"
                                                        ><option
                                                            placeholder="16 - Estrutura Beneficiada"
                                                            >16 - Estrutura
                                                            Beneficiada</option
                                                        ><option value="Valor02"
                                                            >Valor 02</option
                                                        >
                                                    </select></span
                                                ></span
                                            >
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class="col-sm-6">
                                            <label
                                                >&Aacute;rea Beneficiada</label
                                            >
                                            <span
                                                class="h-card"
                                                data-campo-altura="10"
                                                data-campo-classe=""
                                                data-campo-estilo=""
                                                data-campo-largura="200"
                                                style="display:block;"
                                                ><span
                                                    class="form-group form-md-line-input "
                                                    ><select
                                                        class="form-control"
                                                        data-campo-id="@@17@@"
                                                        id="@@17@@"
                                                        ><option
                                                            placeholder="17 - Área beneficiada"
                                                            >17 - &Aacute;rea
                                                            beneficiada</option
                                                        ><option value="Valor02"
                                                            >Valor 02</option
                                                        >
                                                    </select></span
                                                ></span
                                            >
                                        </div>

                                        <div class="col-sm-6">
                                            <label>Gestor do Contrato</label>
                                            <span
                                                class="h-card"
                                                data-campo-altura="10"
                                                data-campo-classe=""
                                                data-campo-estilo=""
                                                data-campo-largura="200"
                                                style="display:block;"
                                                ><span
                                                    class="form-group form-md-line-input "
                                                    ><select
                                                        class="form-control"
                                                        data-campo-id="@@68@@"
                                                        id="CAMPO_68"
                                                        ><option
                                                            placeholder="68 - Gestor do Contrato"
                                                            >68 - Gestor do
                                                            Contrato</option
                                                        ><option value="Valor02"
                                                            >Valor 02</option
                                                        >
                                                    </select></span
                                                ></span
                                            >

                                            <div style="display: none">
                                                <span
                                                    class="h-card"
                                                    data-campo-altura="10"
                                                    data-campo-classe=""
                                                    data-campo-estilo=""
                                                    data-campo-largura="200"
                                                    style="display:block;"
                                                    ><span
                                                        class="form-group form-md-line-input "
                                                        ><input
                                                            class="form-control"
                                                            data-campo-id="@@19@@"
                                                            id="@@19@@"
                                                            placeholder=" "
                                                            type="text"/></span
                                                ></span>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class="col-sm-6">
                                            <label>Objeto</label>
                                            <span
                                                class="h-card"
                                                data-campo-altura="10"
                                                data-campo-classe=""
                                                data-campo-estilo=""
                                                data-campo-largura="200"
                                                style="display:block;"
                                                ><span
                                                    class="form-group  "
                                                    ><textarea
                                                        class="form-control"
                                                        cols="60"
                                                        data-campo-id="@@18@@"
                                                        id="@@18@@"
                                                        name="message"
                                                        placeholder="18 - Objeto"
                                                        rows="10"
                                                    >
                                                    </textarea></span
                                            ></span>
                                        </div>

                                        <div class="col-sm-6">&nbsp;</div>
                                    </div>
                                </fieldset>

                                <fieldset>
                                    <legend>
                                        Dados dos Fornecedores Envolvidos
                                    </legend>

                                    <div class="form-group">
                                        <div class="col-sm-6">&nbsp;</div>
                                        <label
                                            >Sele&ccedil;&atilde;o de
                                            Fornecedores</label
                                        >
                                        <span
                                            class="h-card"
                                            data-campo-altura="10"
                                            data-campo-classe=""
                                            data-campo-estilo=""
                                            data-campo-largura="200"
                                            style="display:block;"
                                            ><span
                                                class="form-group form-md-line-input "
                                                ><select
                                                    class="form-control"
                                                    data-campo-id="@@20@@"
                                                    id="@@20@@"
                                                    ><option
                                                        placeholder="20 - Seleção de Fornecedores"
                                                        >20 -
                                                        Sele&ccedil;&atilde;o de
                                                        Fornecedores</option
                                                    ><option value="Valor02"
                                                        >Valor 02</option
                                                    >
                                                </select></span
                                            ></span
                                        >

                                        <div class="col-sm-6">&nbsp;</div>
                                    </div>

                                    <div
                                        class="form-group col-sm-12"
                                        style="padding-left: 0; margin-bottom: 40px"
                                    >
                                        <button
                                            class="indicacao btn btn-primary"
                                        >
                                            Indica&ccedil;&atilde;o de
                                            fornecedor?
                                        </button>
                                    </div>

                                    <div class="dados-fornecedor-indicado">
                                        <div
                                            class="form-group col-sm-12"
                                            style="padding-left: 0;"
                                        >
                                            <div class="col-sm-6">
                                                <label
                                                    >Raz&atilde;o Social</label
                                                ><span
                                                    class="h-card"
                                                    data-campo-altura="10"
                                                    data-campo-classe=""
                                                    data-campo-estilo=""
                                                    data-campo-largura="200"
                                                    style="display:block;"
                                                    ><span
                                                        class="form-group form-md-line-input "
                                                        ><input
                                                            class="form-control"
                                                            data-campo-id="@@51@@"
                                                            id="@@51@@"
                                                            placeholder=" "
                                                            type="text"/></span
                                                ></span>
                                            </div>

                                            <div class="col-sm-6">&nbsp;</div>
                                        </div>

                                        <div class="form-group">
                                            <div class="col-sm-6">
                                                <label
                                                    >CNPJ do fornecedor</label
                                                >
                                                <span
                                                    class="h-card"
                                                    data-campo-altura="10"
                                                    data-campo-classe=""
                                                    data-campo-estilo=""
                                                    data-campo-largura="200"
                                                    style="display:block;"
                                                    ><span
                                                        class="form-group form-md-line-input "
                                                        ><input
                                                            class="form-control"
                                                            data-campo-id="@@22@@"
                                                            id="@@22@@"
                                                            placeholder=" "
                                                            type="text"/></span
                                                ></span>
                                            </div>

                                            <div class="col-sm-6">
                                                <label
                                                    >Pessoa para contato</label
                                                >
                                                <span
                                                    class="h-card"
                                                    data-campo-altura="10"
                                                    data-campo-classe=""
                                                    data-campo-estilo=""
                                                    data-campo-largura="200"
                                                    style="display:block;"
                                                    ><span
                                                        class="form-group form-md-line-input "
                                                        ><input
                                                            class="form-control"
                                                            data-campo-id="@@23@@"
                                                            id="@@23@@"
                                                            placeholder=" "
                                                            type="text"/></span
                                                ></span>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <div class="col-sm-6">
                                                <label
                                                    >Telefone para
                                                    contato</label
                                                >
                                                <span
                                                    class="h-card"
                                                    data-campo-altura="10"
                                                    data-campo-classe=""
                                                    data-campo-estilo=""
                                                    data-campo-largura="200"
                                                    style="display:block;"
                                                    ><span
                                                        class="form-group form-md-line-input "
                                                        ><input
                                                            class="form-control"
                                                            data-campo-id="@@35@@"
                                                            id="@@35@@"
                                                            placeholder=" "
                                                            type="text"/></span
                                                ></span>
                                            </div>

                                            <div class="col-sm-6">
                                                <label
                                                    >Email para contato</label
                                                >
                                                <span
                                                    class="h-card"
                                                    data-campo-altura="10"
                                                    data-campo-classe=""
                                                    data-campo-estilo=""
                                                    data-campo-largura="200"
                                                    style="display:block;"
                                                    ><span
                                                        class="form-group form-md-line-input "
                                                        ><input
                                                            class="form-control"
                                                            data-campo-id="@@24@@"
                                                            id="@@24@@"
                                                            placeholder=" "
                                                            type="text"/></span
                                                ></span>
                                            </div>
                                        </div>
                                    </div>
                                </fieldset>

                                <fieldset>
                                    <legend>Dados do Contrato</legend>

                                    <div class="form-group">
                                        <label
                                            >N&uacute;mero do Contrato
                                            SAP</label
                                        >

                                        <div>
                                            <span
                                                class="h-card"
                                                data-campo-altura="10"
                                                data-campo-classe=""
                                                data-campo-estilo=""
                                                data-campo-largura="200"
                                                style="display:block;"
                                                ><span
                                                    class="form-group form-md-line-input "
                                                    ><input
                                                        class="form-control"
                                                        data-campo-id="@@58@@"
                                                        id="@@58@@"
                                                        placeholder=" "
                                                        style="width:200px;"
                                                        type="text"/></span
                                            ></span>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <table class="table table-striped table-bordered table-hover grid_dll" id="numeroRv">
                                            <thead>
                                                <tr data-cabecalho-container="">
                                                    <th data-elem="input" data-type="text" scope="col">
                                                        N&uacute;mero da RV
                                                    </th>
                                                </tr>
                                            </thead>

                                            <tbody class="inputs" data-corpo-container=""></tbody>
                                        </table>
                                    </div>
                                </fieldset>

                                <fieldset>
                                    <legend>
                                        Informa&ccedil;&otilde;es de Prazos e
                                        Prorroga&ccedil;&otilde;es
                                    </legend>

                                    <div class="form-group">
                                        <div class="col-sm-6">
                                            <h4>Vig&ecirc;ncia</h4>

                                            <div
                                                class="col-sm-6"
                                                style="padding-left:0;"
                                            >
                                                <label>De:</label>
                                                <span
                                                    class="h-card"
                                                    data-campo-altura="10"
                                                    data-campo-classe=""
                                                    data-campo-estilo=""
                                                    data-campo-largura="200"
                                                    style="display:block;"
                                                    ><span
                                                        class="form-group form-md-line-input "
                                                        ><input
                                                            class="form-control"
                                                            data-campo-id="@@28@@"
                                                            id="@@28@@"
                                                            placeholder="28 - De (vigência)"
                                                            type="date"/></span
                                                ></span>
                                            </div>

                                            <div class="col-sm-6">
                                                <label>At&eacute;:</label>
                                                <span
                                                    class="h-card"
                                                    data-campo-altura="10"
                                                    data-campo-classe=""
                                                    data-campo-estilo=""
                                                    data-campo-largura="200"
                                                    style="display:block;"
                                                    ><span
                                                        class="form-group form-md-line-input "
                                                        ><input
                                                            class="form-control"
                                                            data-campo-id="@@29@@"
                                                            id="@@29@@"
                                                            placeholder="29 - até (vigência)"
                                                            type="date"/></span
                                                ></span>
                                            </div>
                                        </div>

                                        <div class="col-sm-6">
                                            <h4>
                                                Vig&ecirc;ncia P&oacute;s
                                                Prorroga&ccedil;&atilde;o
                                            </h4>

                                            <div
                                                class="col-sm-6"
                                                style="padding-left:0;"
                                            >
                                                <label>De:</label>
                                                <span
                                                    class="h-card"
                                                    data-campo-altura="10"
                                                    data-campo-classe=""
                                                    data-campo-estilo=""
                                                    data-campo-largura="200"
                                                    style="  display:block;"
                                                    ><span
                                                        class="form-group form-md-line-input "
                                                        ><input
                                                            class="form-control"
                                                            data-campo-id="@@30@@"
                                                            id="@@30@@"
                                                            placeholder="30 - de (vigência pós prorrogação)"
                                                            type="date"/></span
                                                ></span>
                                            </div>

                                            <div class="col-sm-6">
                                                <label>At&eacute;:</label>
                                                <span
                                                    class="h-card"
                                                    data-campo-altura="10"
                                                    data-campo-classe=""
                                                    data-campo-estilo=""
                                                    data-campo-largura="200"
                                                    style="display:block;"
                                                    ><span
                                                        class="form-group form-md-line-input "
                                                        ><input
                                                            class="form-control"
                                                            data-campo-id="@@31@@"
                                                            id="@@31@@"
                                                            placeholder="31 - até (vigência final pós prorrogação)"
                                                            type="date"/></span
                                                ></span>
                                            </div>
                                        </div>
                                    </div>
                                </fieldset>

                                <fieldset class="field-anexos">
                                    <legend>Anexos</legend>

                                    <div class="form-group">
                                        <div class="col-sm-2">
                                            <label
                                                class="btn btn-light label-input-file"
                                                for="memorando-condicionamento"
                                                >M. Condicionamento</label
                                            >
                                            <span
                                                class="h-card fa fa-ban font-red-thunderbird"
                                                ><i></i>:&nbsp;<input
                                                    class="formulario-upload"
                                                    converterparaimagem="false"
                                                    data-arquivo-nome=""
                                                    data-tipo-anexo-id="4"
                                                    id="memorando-condicionamento"
                                                    multiple="multiple"
                                                    style="display: inline-block;"
                                                    type="file"
                                                />
                                            </span>
                                        </div>

                                        <div class="col-sm-2">
                                            <label
                                                class="btn btn-light label-input-file"
                                                for="projeto-basico"
                                                >Projeto B&aacute;sico</label
                                            >
                                            <span
                                                class="h-card fa fa-ban font-red-thunderbird"
                                                ><i></i>:&nbsp;<input
                                                    class="formulario-upload"
                                                    converterparaimagem="false"
                                                    data-arquivo-nome=""
                                                    data-tipo-anexo-id="5"
                                                    id="projeto-basico"
                                                    multiple="multiple"
                                                    style="display: inline-block;"
                                                    type="file"
                                                />
                                            </span>
                                        </div>

                                        <div class="col-sm-2">
                                            <label
                                                class="btn btn-light label-input-file"
                                                for="pxq"
                                                >PxQ</label
                                            >
                                            <span
                                                class="h-card fa fa-ban font-red-thunderbird"
                                                ><i></i>:&nbsp;<input
                                                    class="formulario-upload"
                                                    converterparaimagem="false"
                                                    data-arquivo-nome=""
                                                    data-tipo-anexo-id="6"
                                                    id="pxq"
                                                    multiple="multiple"
                                                    style="display: inline-block;"
                                                    type="file"
                                                />
                                            </span>
                                        </div>

                                        <div class="col-sm-2">
                                            <label
                                                class="btn btn-light label-input-file"
                                                for="acordo-cdg"
                                                >De Acordo Cdg</label
                                            ><span
                                                class="h-card fa fa-ban font-red-thunderbird"
                                                style="display: none;"
                                                ><i></i
                                                ><input
                                                    class="file-path formulario-upload validate "
                                                    converterparaimagem="false"
                                                    data-arquivo-nome=""
                                                    data-tipo-anexo-id="10"
                                                    id="acordo-cdg"
                                                    multiple="multiple"
                                                    style="display: inline-block;"
                                                    type="file"
                                            /></span>
                                        </div>

                                        <div class="col-sm-2">
                                            <label
                                                class="btn btn-light label-input-file"
                                                for="rv-aprovada"
                                                >rv Aprovada</label
                                            ><span
                                                class="h-card fa fa-ban font-red-thunderbird"
                                                style="display: none;"
                                                ><i></i
                                                ><input
                                                    class="file-path formulario-upload validate "
                                                    converterparaimagem="false"
                                                    data-arquivo-nome=""
                                                    data-tipo-anexo-id="9"
                                                    id="rv-aprovada"
                                                    multiple="multiple"
                                                    style="display: inline-block;"
                                                    type="file"
                                            /></span>
                                        </div>

                                        <div class="col-sm-2">
                                            <label
                                                class="btn btn-light label-input-file"
                                                for="outrosAnexos"
                                                >Outros Anexos</label
                                            >
                                            <span
                                                class="h-card fa fa-ban font-red-thunderbird"
                                                ><i></i>:&nbsp;<input
                                                    class="formulario-upload"
                                                    converterparaimagem="false"
                                                    data-arquivo-nome=""
                                                    data-tipo-anexo-id="7"
                                                    id="outrosAnexos"
                                                    multiple="multiple"
                                                    style="display: inline-block;"
                                                    type="file"
                                                />
                                            </span>
                                        </div>
                                    </div>
                                </fieldset>
                            </div>
                            <!--fim dados da compra--><!--DADOS DO SOLICITANTE-->

                            <div
                                class="form-group form-solicitante"
                                style="margin-bottom: 70px"
                            >
                                <fieldset>
                                    <legend>Dados do Solicitante</legend>

                                    <div class="form-group">
                                        <div class="col-sm-6">
                                            <label>RE</label>
                                            <span
                                                class="h-card"
                                                data-campo-altura="10"
                                                data-campo-classe=""
                                                data-campo-estilo=""
                                                data-campo-largura="200"
                                                style="display:block;"
                                                ><span
                                                    class="form-group form-md-line-input "
                                                    ><input
                                                        class="form-control"
                                                        data-campo-id="@@36@@"
                                                        id="CAMPO_36"
                                                        placeholder=" "
                                                        type="text"/></span
                                            ></span>
                                        </div>

                                        <div class="col-sm-6">
                                            <label>Nome</label>
                                            <span
                                                class="h-card"
                                                data-campo-altura="10"
                                                data-campo-classe=""
                                                data-campo-estilo=""
                                                data-campo-largura="200"
                                                style="display:block;"
                                                ><span
                                                    class="form-group form-md-line-input "
                                                    ><input
                                                        class="form-control"
                                                        data-campo-id="@@37@@"
                                                        id="CAMPO_37"
                                                        placeholder=" "
                                                        type="text"/></span
                                            ></span>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class="col-sm-6">
                                            <label>E-mail</label>
                                            <span
                                                class="h-card"
                                                data-campo-altura="10"
                                                data-campo-classe=""
                                                data-campo-estilo=""
                                                data-campo-largura="200"
                                                style="display:block;"
                                                ><span
                                                    class="form-group form-md-line-input "
                                                    ><input
                                                        class="form-control"
                                                        data-campo-id="@@38@@"
                                                        id="@@38@@"
                                                        placeholder=" "
                                                        type="text"/></span
                                            ></span>
                                        </div>

                                        <div class="col-sm-6">
                                            <label>Telefone</label>
                                            <span
                                                class="h-card"
                                                data-campo-altura="10"
                                                data-campo-classe=""
                                                data-campo-estilo=""
                                                data-campo-largura="200"
                                                style="display:block;"
                                                ><span
                                                    class="form-group form-md-line-input "
                                                    ><input
                                                        class="form-control"
                                                        data-campo-id="@@39@@"
                                                        id="@@39@@"
                                                        placeholder=" "
                                                        type="text"/></span
                                            ></span>
                                        </div>
                                    </div>

                                    <div class="form-group col-sm-12">
                                        <div
                                            class="col-sm-6"
                                            style="padding-left: 0"
                                        >
                                            <label>&Aacute;rea</label>
                                            <span
                                                class="h-card"
                                                data-campo-altura="10"
                                                data-campo-classe=""
                                                data-campo-estilo=""
                                                data-campo-largura="200"
                                                style="display:block;"
                                                ><span
                                                    class="form-group form-md-line-input "
                                                    ><input
                                                        class="form-control"
                                                        data-campo-id="@@40@@"
                                                        id="CAMPO_40"
                                                        placeholder=" "
                                                        type="text"/></span
                                            ></span>
                                        </div>
                                    </div>
                                </fieldset>
                            </div>
                            <!--fim dados do solicitante-->

                            <div
                                class="form-group form-analista"
                                style="margin-bottom: 70px"
                            >
                                <fieldset class="criticidade">
                                    <div
                                        class="col-sm-6"
                                        id="templateTabelaCriticidade"
                                        style="margin-top: 30px"
                                    >
                                        <fieldset>
                                            <legend>
                                                Tabela N&iacute;vel de
                                                Criticidade
                                            </legend>

                                            <div class="row">
                                                <div class="col-md-12">
                                                    <table
                                                        class="table table-striped table-bordered"
                                                        id="tabelaCriticidade"
                                                    >
                                                        <thead>
                                                            <tr role="row">
                                                                <th
                                                                    colspan="1"
                                                                    data-column-index="0"
                                                                    rowspan="1"
                                                                    style="width: 10%;"
                                                                    tabindex="0"
                                                                >
                                                                    Comprador
                                                                </th>
                                                                <th
                                                                    colspan="1"
                                                                    data-column-index="1"
                                                                    rowspan="1"
                                                                    style="width: 15%;"
                                                                    tabindex="0"
                                                                >
                                                                    N&ordm; de
                                                                    Solicita&ccedil;&otilde;es
                                                                </th>
                                                                <th
                                                                    colspan="1"
                                                                    data-column-index="1"
                                                                    rowspan="1"
                                                                    style="width: 10%;"
                                                                    tabindex="0"
                                                                >
                                                                    Baixo
                                                                </th>
                                                                <th
                                                                    colspan="1"
                                                                    data-column-index="1"
                                                                    rowspan="1"
                                                                    style="width: 10%;"
                                                                    tabindex="0"
                                                                >
                                                                    M&eacute;dio
                                                                </th>
                                                                <th
                                                                    colspan="1"
                                                                    data-column-index="1"
                                                                    rowspan="1"
                                                                    style="width: 10%;"
                                                                    tabindex="0"
                                                                >
                                                                    Alto
                                                                </th>
                                                                <th
                                                                    colspan="1"
                                                                    data-column-index="1"
                                                                    rowspan="1"
                                                                    style="width: 10%;"
                                                                    tabindex="0"
                                                                >
                                                                    Total
                                                                </th>
                                                            </tr>
                                                        </thead>
                                                        <tbody></tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </fieldset>
                                    </div>

                                    <div
                                        class="col-sm-6"
                                        style="padding-top: 55px;"
                                    >
                                        <label
                                            >Comprador Respons&aacute;vel</label
                                        >
                                        <select
                                            class="comprador-responsavel form-control"
                                            style="width: 200px"
                                        ></select>
                                    </div>
                                </fieldset>
                            </div>
                            <!--fim dados do solicitante-->

                            <fieldset class="historico">
                                <legend>Hist&oacute;rico</legend>

                                <div class="col-sm-6">
                                    <label>Observa&ccedil;&otilde;es</label
                                    ><textarea
                                        class="form-control"
                                        cols="60"
                                        id="obs"
                                        rows="5"
                                    ></textarea>
                                </div>

                                <div
                                    class="col-sm-12"
                                    id="templateTabelaHistorico"
                                    style="margin-top: 30px"
                                >
                                    <fieldset>
                                        <legend>Hist&oacute;rico</legend>

                                        <div class="row">
                                            <div class="col-md-12">
                                                <table
                                                    class="table table-striped table-bordered"
                                                    id="tabelaHistorico"
                                                >
                                                    <thead>
                                                        <tr role="row">
                                                            <th
                                                                colspan="1"
                                                                data-column-index="0"
                                                                rowspan="1"
                                                                style="width: 10%;"
                                                                tabindex="0"
                                                            >
                                                                Data Hora
                                                            </th>
                                                            <th
                                                                colspan="1"
                                                                data-column-index="1"
                                                                rowspan="1"
                                                                style="width: 15%;"
                                                                tabindex="0"
                                                            >
                                                                Usu&aacute;rio
                                                            </th>
                                                            <th
                                                                colspan="1"
                                                                data-column-index="1"
                                                                rowspan="1"
                                                                style="width: 60%;"
                                                                tabindex="0"
                                                            >
                                                                Hist&oacute;rico
                                                            </th>
                                                        </tr>
                                                    </thead>
                                                    <tbody></tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </fieldset>
                                </div>

                                <div style="display: none">
                                    <span
                                        class="h-card"
                                        data-campo-altura="10"
                                        data-campo-classe=""
                                        data-campo-estilo=""
                                        data-campo-largura="200"
                                        style="display:block;"
                                        ><span
                                            class="form-group form-md-line-input "
                                            ><input
                                                class="form-control"
                                                data-campo-id="@@62@@"
                                                id="@@62@@"
                                                placeholder=" "
                                                style="width:200px;"
                                                type="text"/></span
                                    ></span>
                                </div>

                                <div style="display: none;">
                                    <span
                                        class="h-card"
                                        data-campo-altura="10"
                                        data-campo-classe=""
                                        data-campo-estilo=""
                                        data-campo-html="1"
                                        data-campo-largura="200"
                                        style="display:block;"
                                        ><span
                                            class="form-group form-md-line-input "
                                            ><textarea
                                                class="form-control"
                                                cols="60"
                                                data-campo-id="@@34@@"
                                                id="CAMPO_34"
                                                name="message"
                                                placeholder="34 - Historico"
                                                rows="10"
                                            >
                                            </textarea></span
                                    ></span>
                                </div>
                            </fieldset>
                            <span
                                class="h-card"
                                data-campo-altura="10"
                                data-campo-classe=""
                                data-campo-estilo=""
                                data-campo-largura="200"
                                style="display:none;"
                                ><span
                                    class="form-group form-md-line-input "
                                    ><input
                                        class="form-control"
                                        data-campo-id="@@48@@"
                                        id="@@48@@"
                                        placeholder=" "
                                        style="display: none; width:200px;"
                                        type="text"/></span
                            ></span>

                            <div
                                class="slimScrollBar"
                                style="background: rgb(161, 178, 189); width: 7px; position: absolute; top: 0px; opacity: 0.4; display: none; border-radius: 7px; z-index: 99; right: 1px; height: 124.611px;"
                            >
                                &nbsp;
                            </div>

                            <div
                                class="slimScrollRail"
                                style="width: 7px; height: 100%; position: absolute; top: 0px; border-radius: 7px; background: yellow; opacity: 0.2; z-index: 90; right: 1px; display: none;"
                            >
                                &nbsp;
                            </div>
                        </div>
                    </div>
                </div>
                <!-- END Portlet PORTLET-->
            </div>
        </div>

        <script>
            //arquivo formulario.tabelaGrid escuta esse evento
            var tabelaGrid = new FormularioTabelaGrid();

            tabelaGrid.setConfigTabela({
                nameTable: 'numeroRv',
                readOnly: true,
                enableExclusion: false
            });

            var FormularioFase3 = (function () {
                var contadorFuncao = 0;
                var usuariosGrupo = [];
                var token = Ecm.token;
                var usuarioCriticidade = [];
                var contadorListaDinamicaResponsavel = 0;

                function init () {

                    setTimeout(() => {
                        $(".compras input, .compras textarea").removeAttr(
                            "placeholder"
                        );
                    }, 200);
                    setTimeout(() => {
                        $("#CAMPO_1").val(
                            `${Ecm.retornaUsuario().id} - ${Ecm.retornaUsuario().nome}`
                        );
                        $("#CAMPO_2").val(Ecm.retornaUsuario().observacao);
                    }, 200);

                    setTimeout(() => {
                        if ( DocumentoVisualizacaoForm.retornaDocumento().atividadeId == 2 ) {
                            $("#CAMPO_37").val(Ecm.retornaUsuario().nome);
                            $("#CAMPO_38").val(Ecm.retornaUsuario().email);
                            $("#CAMPO_39").val(Ecm.retornaUsuario().contato);
                            $("#CAMPO_40").val(Ecm.retornaUsuario().observacao);
                        }

                        tabelaGrid.listarGridSalvoNoBanco();
                    }, 2000);

                    setTimeout(() => {
                        if ( DocumentoVisualizacaoForm.retornaDocumento().atividadeId > 2 )
                            carregarHistoricoNaTabela();
                        else $("#templateTabelaHistorico").hide();

                        retornaUsuariosGrupo();
                    }, 200);

                    setTimeout(() => { $("#cke_CAMPO_34").hide(); }, 200);

                    setTimeout(() => {
                        if ($(".acm_tbra input").val() == "") {
                            $(".acm_tbra").hide();
                        }
                    }, 400);

                    setTimeout(() => $(".cancelar").hide(), 200);
                    setTimeout(() => { $( ".compras input, .compras select:not(.comprador-responsavel), .compras textarea:not(#obs)" ).prop("disabled", true); }, 500);

                    setTimeout(() => {
                        $("#CAMPO_49").val(new Date().toLocaleDateString());
                        $("#CAMPO_63").val(new Date().toLocaleDateString());
                        var sla = new Date();
                        var dataSla;
                        var diasCricidade = 0;
                        switch ($("#CAMPO_13").val()) {
                            case "NOVA-CONTRATACAO":
                                diasCricidade = 120;
                                dataSla = new Date(
                                    sla.getTime() + diasCricidade * 24 * 60 * 60 * 1000
                                );
                                break;
                            case "ADESAO-A-UM-CONTRATO-VIGENTE-(EMPRESAS-DO-GRUPO)":
                                diasCricidade = 120;
                                dataSla = new Date(
                                    sla.getTime() + diasCricidade * 24 * 60 * 60 * 1000
                                );
                                break;
                            case "DESBLOQUEIO-DO-CONTRATO-SAP":
                                diasCricidade = 0;
                                dataSla = new Date(
                                    sla.getTime() + diasCricidade * 24 * 60 * 60 * 1000
                                );
                                break;
                            default:
                                diasCricidade = 45;
                                dataSla = new Date(
                                    sla.getTime() + diasCricidade * 24 * 60 * 60 * 1000
                                );
                                break;
                        }
                        $("#CAMPO_49").val(dataSla.toLocaleDateString());
                    }, 1000);

                    Ecm.registraEvento('click', '.aba-compra', onClickAbaCompra);
                    Ecm.registraEvento('click', '.aba-solicitante', onClickAbaSolicitante);
                    Ecm.registraEvento('click', '.aba-analista', onClickAbaAnalista);
                    Ecm.registraEvento('change', '.comprador-responsavel', onChangeComprador);
                    Ecm.registraEvento('click', '.indicacao', onClickIndicacao);
                    Ecm.registraEvento('click', '.js-addNumeroRv', onClickAddNumeroRv);

                    $(".dados-fornecedor-indicado").hide();
                    $(".indicacao").text("Indicação de Fornecedor?");
                    $(".field-anexos span").hide();
                    $(".aba-compra").trigger("click");

                    carregarCompradorResponsavel();
                    desativarCamposAnexos();
                    verificarAnexosExistentes();
                }

                function onClickAbaCompra (event, $element) {
                    $('.form-solicitante, .form-analista').fadeOut(200, () => $('.form-compra').fadeIn());
                    $('.abas').find('li').css('background-color', '');
                    $element.closest('li').css({ 'background-color': '#d6ddff' });
                }

                function onClickAbaSolicitante (event, $element) {
                    $('.form-compra, .form-analista').fadeOut(200, () => $('.form-solicitante').fadeIn());
                    $('.abas').find('li').css('background-color', '');
                    $element.closest('li').css({ 'background-color': '#d6ddff' });
                }

                function onClickAbaAnalista (event, $element) {
                    $('.form-compra, .form-solicitante').fadeOut(200, () => $('.form-analista').fadeIn());
                    $('.abas').find('li').css('background-color', '');
                    $element.closest('li').css({ 'background-color': '#d6ddff' });
                    escolherComprador();
                }

                function onClickIndicacao (event, $element) {
                    if (event && event.detail !== 1)
                        return;

                    var $botao = $($element);

                    if ($botao.text() == "Indicação de Fornecedor?") {
                        $(".dados-fornecedor-indicado").slideDown();
                        $botao.text("Cancelar Indicação do Fornecedor");
                        $botao.removeClass("btn-primary");
                        $botao.addClass("btn-danger");
                    } else if ($botao.text() == "Fornecedor Indicado") {
                    } else {
                        $(".dados-fornecedor-indicado").slideUp();
                        $botao.text("Indicação de Fornecedor?");
                        $botao.removeClass("btn-danger");
                        $botao.addClass("btn-primary");
                    }
                }

                function onChangeComprador (event, $element) {
                    var text = $element
                        .find('option:checked')
                        .text();

                    $('#CAMPO_48').val(text);
                }

                function gravarHistoricoNoHTML (event) {
                    gerarHistoricoCampo34();

                    var getId = "#" + event.currentTarget.getAttribute("id");
                    DocumentoVisualizacaoForm.publicarSaida(getId);
                }

                function gerarHistoricoCampo34 () {
                    if ($('#obs').val() != '') {
                        var historico = $('#cke_CAMPO_34 iframe')[0].contentWindow.document.querySelectorAll('html body')[0].textContent;
                        var dateTime = moment().format('DD/MM/YYYY HH:mm:ss')

                        var usuarioLogado = Ecm.retornaUsuario();

                        var historico2 = [];

                        if (historico == '') {
                            //se for o primeiro historico, ou seja, se o historico estiver vazio
                            historico2.push(
                                JSON.parse(
                                    '{ "dataHora": "' +
                                        dateTime +
                                        '", "usuario": "' +
                                        usuarioLogado.nome +
                                        '", "historico": "' +
                                        $('#obs').val() +
                                        '" }'
                                )
                            );
                            $(
                                '#cke_CAMPO_34 iframe'
                            )[0].contentWindow.document.querySelectorAll(
                                'html body'
                            )[0].textContent = JSON.stringify(historico2);
                        } else {
                            //se não for o primeiro historico, ou seja, se o historico estiver preenchido

                            var tempObservacao = JSON.parse(
                                '{ "dataHora": "' +
                                    dateTime +
                                    '", "usuario": "' +
                                    usuarioLogado.nome +
                                    '", "historico": "' +
                                    $('#obs').val() +
                                    '" }'
                            );

                            var tempHistorico = JSON.parse($('#cke_CAMPO_34 iframe')[0].contentWindow.document.querySelectorAll('html body')[0].textContent);

                            if ($('#obs').length <= 0) {
                                Ecm.alertErro(
                                    'Ocorreu um erro ao tentar gravar as informações na tabela.',
                                    'Erro ao gravar o Histórico',
                                    3
                                );
                                return false;
                            }

                            tempHistorico.push(tempObservacao);

                            $(
                                '#cke_CAMPO_34 iframe'
                            )[0].contentWindow.document.querySelectorAll(
                                'html body'
                            )[0].textContent = JSON.stringify(
                                tempHistorico
                            );
                        }
                    }
                }

                function retornaUsuariosGrupo() {
                    usuarioCriticidade = [];
                    Ecm.retornaUsuariosDoGrupo(6, e => {
                        var quantidade = e.usuarios.length;
                        e.usuarios.forEach((v, i) => {
                            var data = [];

                            data.push({
                                Id: 48,
                                tipoDocumentalId: 35,
                                colunaTipo: "C",
                                comparacao: 6,
                                valor: v.Nome
                            });

                            var objData = JSON.stringify(data);

                            PesquisaDocumentos(objData);
                        });
                    });
                }

                function PesquisaDocumentos(data) {
                    var url_atual = window.location.href;

                    var settings = {
                        async: false,
                        url:
                            url_atual.split("Autenticado")[0] +
                            "/api/v2/documentos/pesquisar/35/quantidade/1000/retornarAnexos/true",
                        method: "POST",
                        headers: {
                            "content-type": "application/json",
                            authorization: token
                        },
                        processData: false,
                        data: data
                    };

                    $.ajax(settings).done(function(response) {
                        if (!Array.isArray(response)) {
                            return;
                        }

                        response.forEach((element, i) => {
                            if (
                                element.atividadeId == 7 ||
                                element.atividadeId == 8
                            ) {
                                $(element).each((i, item) => {
                                    usuarioCriticidade.push({
                                        atividade: item.atividadeId,
                                        nome: item.camposValor[45].valor,
                                        criticidade: item.camposValor[42].valor
                                    });
                                });
                            }
                        });
                    });
                    PreencherTabela();
                }

                function onClickAddNumeroRv(event, $element) {
                    tabelaGrid.btnAdicionarTr($element);
                }
                //CARREGAR TABELA
                function carregarHistoricoNaTabela() {
                    if (contadorFuncao == 0) {
                        if ($("#cke_CAMPO_34 iframe")[0] != undefined) {
                            if (
                                $(
                                    "#cke_CAMPO_34 iframe"
                                )[0].contentWindow.document.querySelectorAll(
                                    "html body"
                                )[0].textContent != ""
                            ) {
                                setTimeout(function() {
                                    String.prototype.stripHTML = function() {
                                        return this.replace(/<.*?>/g, "");
                                    };
                                    let campoHistorico = $(
                                        "#cke_CAMPO_34 iframe"
                                    )[0].contentWindow.document.querySelectorAll(
                                        "html body"
                                    )[0].textContent;
                                    historicoAnterior = $(
                                        "#cke_CAMPO_34 iframe"
                                    )[0].contentWindow.document.querySelectorAll(
                                        "html body"
                                    )[0].textContent;

                                    var dataSet = JSON.parse(campoHistorico);
                                    var tabelaHistorico = $("#tabelaHistorico");

                                    tabelaHistorico.find("td").remove();
                                    tabelaHistorico.DataTable({
                                        data: dataSet,
                                        destroy: true,
                                        columns: [
                                            {
                                                data: "dataHora"
                                            },
                                            {
                                                data: "usuario"
                                            },
                                            {
                                                data: "historico"
                                            }
                                        ],
                                        order: [[0, "desc"]],
                                        language: {
                                            aria: {
                                                sortAscending:
                                                    ": ordenar crescente",
                                                sortDescending:
                                                    ": ordenar decrescente"
                                            },
                                            emptyTable: "Nenhum resgistro",
                                            info: "",
                                            infoEmpty: "Nenhum registro",
                                            infoFiltered:
                                                "(filtrado de MAX registros)",
                                            lengthMenu: "",
                                            search: "Filtrar:",
                                            zeroRecords: "Nenhum resgistro",
                                            paginate: {
                                                previous: "Anterior",
                                                next: "Próximo",
                                                last: "Ultimo",
                                                first: "primeiro"
                                            }
                                        }
                                    });
                                }, 500);
                                contadorFuncao++;
                            } else {
                                setTimeout(carregarHistoricoNaTabela, 500);
                            }
                        } else {
                            setTimeout(carregarHistoricoNaTabela, 500);
                        }
                    }
                }

                function PreencherTabela() {
                    var nomeComprador = [];
                    usuarioCriticidade.forEach((v, i) => {
                        var validar = nomeComprador.find(function(e) {
                            return e == v.nome;
                        });

                        if (validar == undefined) nomeComprador.push(v.nome);
                    });

                    var numDocCompradores = [];
                    nomeComprador.forEach((v, i) => {
                        let compradores = usuarioCriticidade.filter(e => {
                            return e.nome == v;
                        });
                        numDocCompradores.push(compradores.length);
                    });

                    var numBaixo = [];
                    nomeComprador.forEach((v, i) => {
                        var cBaixo = 0;
                        usuarioCriticidade.forEach(e => {
                            if (e.nome == v) {
                                if (e.criticidade == "Baixo") {
                                    cBaixo++;
                                }
                            }
                        });
                        numBaixo.push(cBaixo);
                    });

                    var numMedio = [];
                    nomeComprador.forEach((v, i) => {
                        var cMedio = 0;
                        usuarioCriticidade.forEach(e => {
                            if (e.nome == v) {
                                if (e.criticidade == "Médio") {
                                    cMedio++;
                                }
                            }
                        });
                        numMedio.push(cMedio);
                    });

                    var numAlto = [];
                    nomeComprador.forEach((v, i) => {
                        var cAlto = 0;
                        usuarioCriticidade.forEach(e => {
                            if (e.nome == v) {
                                if (e.criticidade == "Alto") {
                                    cAlto++;
                                }
                            }
                        });
                        numAlto.push(cAlto);
                    });

                    var objTabelaCriticidade = [];
                    nomeComprador.forEach((v, i) => {
                        objTabelaCriticidade.push({
                            nomeCompradores: nomeComprador[i],
                            numDocCompradores: numDocCompradores[i],
                            numBaixo: numBaixo[i],
                            numMedio: numMedio[i],
                            numAlto: numAlto[i],
                            total: numBaixo[i] + numMedio[i] * 2 + numAlto[i] * 3
                        });
                    });

                    //lança valores na tabela criticidade
                    let contadorFuncaoTabelaCriticidade = 0;

                    function popularTabelaCriticidade() {
                        if (contadorFuncaoTabelaCriticidade == 0) {
                            setTimeout(function() {
                                String.prototype.stripHTML = function() {
                                    return this.replace(/<.*?>/g, "");
                                };

                                var dataSet = objTabelaCriticidade;
                                var tabelaHistorico = $("#tabelaCriticidade");

                                tabelaHistorico.find("td").remove();
                                tabelaHistorico.DataTable({
                                    data: dataSet,
                                    destroy: true,
                                    columns: [
                                        {
                                            data: "nomeCompradores"
                                        },
                                        {
                                            data: "numDocCompradores"
                                        },
                                        {
                                            data: "numBaixo"
                                        },
                                        {
                                            data: "numMedio"
                                        },
                                        {
                                            data: "numAlto"
                                        },
                                        {
                                            data: "total"
                                        }
                                    ],
                                    order: [[0, "desc"]],
                                    language: {
                                        aria: {
                                            sortAscending: ": ordenar crescente",
                                            sortDescending: ": ordenar decrescente"
                                        },
                                        emptyTable: "Nenhum resgistro",
                                        info: "",
                                        infoEmpty: "Nenhum registro",
                                        infoFiltered: "(filtrado de MAX registros)",
                                        lengthMenu: "",
                                        search: "Filtrar:",
                                        zeroRecords: "Nenhum resgistro",
                                        paginate: {
                                            previous: "Anterior",
                                            next: "Próximo",
                                            last: "Ultimo",
                                            first: "primeiro"
                                        }
                                    }
                                });
                            }, 500);
                            contadorFuncaoTabelaCriticidade++;
                        }
                    }
                    popularTabelaCriticidade();
                }

                function escolherComprador () {
                    let compradoresPeso = [];

                    $("#tabelaCriticidade td").parent().each((i, v) => {
                            compradoresPeso.push({
                                nome: v.children[0].textContent,
                                peso: parseInt(v.children[5].textContent) || 0
                            });
                        });

                    compradoresPeso = _.orderBy(compradoresPeso, ['peso'], ['asc']);
                    var comprador = _.head(compradoresPeso);

                    if (comprador) {
                        $('.comprador-responsavel option').each(function(index, value) {
                            if (value.text === comprador.nome) {
                                $('.comprador-responsavel option:eq(' + index + ')').attr('selected', true);
                                $('#CAMPO_48').val(value.text);
                            }
                        });

                        $('.comprador-responsavel').trigger('change');
                    }
                }

                function desativarCamposAnexos () {
                    var $container = $(document.body).find('.field-anexos');

                    $container.find('.label-input-file').addClass('disabled');
                    $container
                    .find('input:file')
                    .removeClass('validate')
                    .attr('disabled', true);
                }

                function verificarAnexosExistentes () {
                    $('#js-listagem-anexos li').each((id, element) => {
                        var $el = $(element);
                        var state = $el.data('state');

                        if (state && state.anexo) {
                            var nameAnexo = state.anexo.nomeOriginal;
                            nameAnexo = nameAnexo ? nameAnexo.split('.')[0].toLowerCase() : null;

                            $(document.body).find('[for="' + nameAnexo + '"]').addClass('blue');
                        }
                    });
                }

                function carregarCompradorResponsavel () {
                    Ecm.retornaUsuariosDoGrupo(6, data => {
                        var $dropComprador = $('.comprador-responsavel');
                        $dropComprador.html('<option>Selecione</option>');

                        if (!data || !Array.isArray(data.usuarios)) {
                            toastr.error('Não foi possivel carregar os compradores responsáveis!');
                            return;
                        }

                        data.usuarios.forEach(user => $dropComprador.append('<option value="' + user.Id + '">' + user.Nome + '</option>'));
                    });
                }

                function onClickSalvar (event) {
                    var $btn = $('.botoes').find('.salvar');
                    gerarHistoricoCampo34();
                    //para gerar o historico antes de salvar
                    setTimeout(() => $btn.trigger('click'), 300);
                }

                function renderizarBotaoSuperior (transicaoSaidas) {
                    var $container = $('.botoes');
                    $container.find('.btn-superior').remove();
                    $container.find('.btn').hide();

                    var $btnSalvar = $('<a />');

                    $btnSalvar
                        .attr('href', 'javascript:')
                        .addClass('btn btn-sm btn-primary green btn-superior')
                        .css({
                            'display': 'inline-block',
                            'margin-right': '10px'
                        })
                        .on('click', onClickSalvar)
                        .html('Salvar');

                    $btnSalvar.appendTo($container);

                    for (var index in transicaoSaidas) {
                        var saida = transicaoSaidas[index];
                        var $sd = $(document.body).find('#transicao-id-' + saida.Id);

                        if (!$sd.length)
                            continue;

                        var $btnTransacaoSaida = $('<a />');
                        $btnTransacaoSaida
                        .attr('id', 'transicao-id-' + saida.Id)
                        .attr('href', 'javascript:')
                        .addClass('btn btn-sm btn-primary btn-superior')
                        .css({
                            'display': 'inline-block',
                            'margin-right': '10px',
                            'background-color': saida.Cor,
                            'border-color': saida.Cor,
                        })
                        .on('click', gravarHistoricoNoHTML)
                        .html(saida.Nome);

                        $btnTransacaoSaida.appendTo($container);
                    }
                }

                function renderizarBotaoInferior (transicaoSaidas) {
                    var $tabPane = $('.tab-pane');
                    $tabPane.find('.btn-inferior').remove();

                    var $btnSalvar = $('<a />');

                    $btnSalvar
                        .attr('href', 'javascript:')
                        .addClass('btn btn-sm btn-primary green btn-inferior')
                        .css({
                            'display': 'inline-block',
                            'margin-right': '10px'
                        })
                        .on('click', onClickSalvar)
                        .html('Salvar');

                    $btnSalvar.appendTo($tabPane);

                    for (var index in transicaoSaidas) {
                        var saida = transicaoSaidas[index];
                        var $sd = $(document.body).find('#transicao-id-' + saida.Id);

                        if (!$sd.length)
                            continue;

                        var $btnTransacaoSaida = $('<a />');
                        $btnTransacaoSaida
                        .attr('id', 'transicao-id-' + saida.Id)
                        .attr('href', 'javascript:')
                        .addClass('btn btn-sm btn-primary btn-inferior')
                        .css({
                            'display': 'inline-block',
                            'margin-right': '10px',
                            'background-color': saida.Cor,
                            'border-color': saida.Cor,
                        })
                        .on('click', gravarHistoricoNoHTML)
                        .html(saida.Nome);

                        $btnTransacaoSaida.appendTo($('.tab-pane'));
                    }
                }

                function retornaAtividadeSaidasSuccesso (props) {
                    renderizarBotaoSuperior(props.transicaoSaidas);
                    renderizarBotaoInferior(props.transicaoSaidas);
                }

                return {
                    init: init,
                    retornaAtividadeSaidasSuccesso: retornaAtividadeSaidasSuccesso,
                };
            })();

            DocumentoVisualizacaoForm.eventListerner.retornaAtividadeSaidasSuccesso = FormularioFase3.retornaAtividadeSaidasSuccesso;
            DocumentoVisualizacaoForm.camposCarregados(FormularioFase3.init);
        </script>
    </body>
</html>
